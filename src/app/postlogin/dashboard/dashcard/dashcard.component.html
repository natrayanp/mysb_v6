
<mat-card [ngClass]="(detailmode)?'dashcarddetail mat-elevation-z8':'dashcardless mat-elevation-z8'">
  <mat-card-header>
    <mat-card-title><h2>{{pfmain.pfportfolioname}}</h2></mat-card-title>
    <mat-card-subtitle>{{pfmain.pfpurpose}}</mat-card-subtitle>
  </mat-card-header>
  <mat-card-content>
    <div *ngIf = "dailyposfetch">
        <mat-spinner [diameter]="40"></mat-spinner>
    </div>
    <div fxLayout = "row wrap" *ngIf = "!dailyposfetch">
          
      <div fxFlex="1 1 25%">
        <p>Total Value</p>
        <p>
            <label>
                <h3>{{dpsum.curval}}</h3>
            </label>
        </p>
      </div>

      <div fxFlex="1 1 auto">
          <p>Invested Amount </p>
          <p>
              <label>
                  <h3>{{dpsum.invamt}}</h3>
              </label>
          </p>
        </div>
        <div fxFlex="1 1 auto">
            <p>P/L Amount </p>
            <p>
                <label>
                    <h3>{{dpsum.pnl}}</h3>
                </label>
            </p>
          </div>

          <div fxFlex="1 1 auto">
              <p>Growth % </p>
              <p>
                  <label>
                      <h3>{{dpsum.percentgr}}%</h3>
                  </label>
              </p>
            </div>

    </div>

    <!--div fxLayout = "row wrap">
          
        <div fxFlex="1 1 50%">
          <p>Start date </p>
          <p>
              <label>
                  <h3>25-May-2018</h3>
              </label>
          </p>
        </div>
  
        <div fxFlex="1 1 50%">
            <p>End date </p>
            <p>
                <label>
                    <h3>25-May-2028</h3>
                </label>
            </p>
          </div>
  
      </div-->
      <div *ngIf = "dashcharfetch">
            <mat-spinner [diameter]="40"></mat-spinner>
      </div>
      <div *ngIf = "!dashcharfetch" >
          <app-chart [data] = "linedata" [config]="config1" [elementId]="elementId" [charttype]="'line'" [detailmode]="detailmode"></app-chart>
      </div>



    <div *ngFor = "let dpprod of dpprods">

        <!--product wise Summary record will come in all modes -->
        <mat-card>
            <mat-card-header>
                <mat-card-title><h2>{{dpprod.product}}</h2></mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <mat-divider></mat-divider>
                <div fxLayout = "row wrap" *ngIf = "!dailyposfetch">

                    <div fxFlex="1 1 25%">
                        <p>Total Value</p>
                        <p>
                            <label>
                                <h4>{{dpprod.curval}}</h4>
                            </label>
                        </p>
                    </div>
                    
                    <div fxFlex="1 1 auto">
                        <p>Invested Amount </p>
                        <p>
                            <label>
                                <h4>{{dpprod.invamt}}</h4>
                            </label>
                        </p>
                    </div>

                    <div fxFlex="1 1 auto">
                        <p>P/L Amount </p>
                        <p>
                            <label>
                                <h4>{{dpprod.pnl}}</h4>
                            </label>
                        </p>
                    </div>
                    
                    <div fxFlex="1 1 auto">
                        <p>Growth % </p>
                        <p>
                            <label>
                                <h4>{{dpprod.percentgr}}%</h4>
                            </label>
                        </p>
                    </div>
                    
                </div>
                

        
                <!--product wise detailed record -->
                <div fxLayout = "column wrap" *ngIf = "detailmode" >
                    <mat-divider ></mat-divider>
                    <br >
                    <!--Mutual fund table -->
                    <div *ngIf = "dpprod.prodtyp == 'BSEMF'">
                        <mat-table #table2 [dataSource]="dataSourceval" class = "mat-elevation-z4">
                        
                            <ng-container matColumnDef="Fund">
                                <mat-header-cell *matHeaderCellDef mat-sort-header>Fund </mat-header-cell>
                                <mat-cell *matCellDef="let elementv" [style.color]="'green'"> {{elementv.fundname}} </mat-cell>
                                <mat-footer-cell *matFooterCellDef></mat-footer-cell>        
                            </ng-container>
                
                            <ng-container matColumnDef="Units">
                                <mat-header-cell *matHeaderCellDef mat-sort-header> Total Units </mat-header-cell>
                                <mat-cell *matCellDef="let elementv" [style.color]="'green'"> {{elementv.units}} </mat-cell>
                                <mat-footer-cell *matFooterCellDef></mat-footer-cell>    
                            </ng-container>
                        
                            
                            <ng-container matColumnDef="Invested Amount">
                                <mat-header-cell *matHeaderCellDef mat-sort-header> Investment Amount </mat-header-cell>
                                <mat-cell *matCellDef="let elementv" [style.color]="'green'"> {{elementv.invamt}} </mat-cell>                
                            </ng-container>
                            
                            
                            <ng-container matColumnDef="Amount">
                                <mat-header-cell *matHeaderCellDef mat-sort-header> Amount </mat-header-cell>
                                <mat-cell *matCellDef="let elementv" [style.color]="'green'"> {{elementv.amount}} </mat-cell>                
                            </ng-container>
                        
                            <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
                            <mat-row *matRowDef="let row; columns: displayedColumns;" (click)="getRecord(row)" [ngClass]="{'highlight': selectedRowIndex == row.id}"></mat-row>
                            
                        </mat-table>
                        <mat-paginator #paginator2
                            [pageSize]="10"
                            [pageSizeOptions]="[10, 20, 30, 50, 80, 100]"
                            [showFirstLastButtons]="true" class = "mat-elevation-z4">
                        </mat-paginator>
                    </div>
                </div>
            </mat-card-content>
        </mat-card>
        <br>
    </div>

  </mat-card-content>
  <mat-card-actions>
    <button mat-button *ngIf = "!detailmode" (click)="navigatedetailspg()">Details</button>    
  </mat-card-actions>
</mat-card>